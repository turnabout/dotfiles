#  _               _               _ _   
# | |__   __ _ ___| |__       __ _(_) |_ 
# | '_ \ / _` / __| '_ \     / _` | | __|
# | |_) | (_| \__ \ | | |   | (_| | | |_ 
# |_.__/ \__,_|___/_| |_|____\__, |_|\__|
#                      |_____|___/       


# +----------------------------------------------------------------------------+
# | Aliases                                                                    |
# +----------------------------------------------------------------------------+
alias gs="git status"
alias gc="git checkout"
alias gcn="git checkout -b "
alias ga="git add -A && git commit"
alias gd="git diff"
alias gpr="git pull --rebase"
alias fuckshitup="git branch --merged develop | grep -v master | grep -v develop | xargs --no-run-if-empty git branch -d"
alias grh="git reset --hard"


# +----------------------------------------------------------------------------+
# | Functions                                                                  |
# +----------------------------------------------------------------------------+

# Git push current branch
function gp() {
    branch_name="$(git symbolic-ref HEAD 2>/dev/null --short)"
    git push origin "${branch_name}"
}

# Add all & push
function gap() {
    ga && gp
}

# Remote update
function gru() {
    git remote update
}

# git log shortcut
function gl() {
    if [ ${1} ]; then 
        git log -${1}
    else
        git log
    fi
}


# +----------------------------------------------------------------------------+
# | Git branch in prompt                                                       |
# +----------------------------------------------------------------------------+
export GIT_PS1_SHOWDIRTYSTATE=true
export GIT_PS1_SHOWUNTRACKEDFILES=

# Brackets needed around non-printable characters in PS1
ps1_red='\[\033[0;31m\]'
ps1_green='\[\033[0;32m\]'
ps1_white='\[\033[0;37m\]'

PS1='\[\033]0;$TITLEPREFIX:${PWD//[^[:ascii:]]/?}\007\]' # set window title
PS1="$PS1"'\n'                 # new line
PS1="$PS1"$ps1_red             # change color
PS1="$PS1"'\u:'                # user
PS1="$PS1"$ps1_white           # change color
PS1="$PS1"'\W'                 # current directory

if test -z "$WINELOADERNOEXEC"
then
    GIT_EXEC_PATH="$(git --exec-path 2>/dev/null)"
    COMPLETION_PATH="${GIT_EXEC_PATH%/libexec/git-core}"
    COMPLETION_PATH="${COMPLETION_PATH%/lib/git-core}"
    COMPLETION_PATH="$COMPLETION_PATH/share/git/completion"
    if test -f "$COMPLETION_PATH/git-prompt.sh"
    then
        . "$COMPLETION_PATH/git-completion.bash"
        . "$COMPLETION_PATH/git-prompt.sh"
        PS1="$PS1"$ps1_green  # change color
        PS1="$PS1"'`__git_ps1 "(%s)"`'   # bash function
    fi
fi

PS1="$PS1"'\[\033[0m\]' # change color
PS1="$PS1"' $ '         # prompt: $
MSYS2_PS1="$PS1"        # for detection by MSYS2 SDK's bash.basrc